# Discord Rating Bot

–ë–æ—Ç –¥–ª—è Discord —Å —Å–∏—Å—Ç–µ–º–æ–π —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ë–æ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Discord, –Ω–∞—á–∏—Å–ª—è–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–æ–≤—ã–µ –æ—á–∫–∏ –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–æ–¥–µ—Ä–∏—Ä—É–µ—Ç –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç. –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Supabase.

## ‚ú® –§—É–Ω–∫—Ü–∏–∏

- **–°–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞**: +1 –æ—á–∫–æ –∑–∞ –∫–∞–∂–¥–æ–µ –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- **–ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
- **–®—Ç—Ä–∞—Ñ—ã**: -10 –æ—á–∫–æ–≤ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞—Ç–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º—É—Ç**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º ‚â§0 –ø–æ–ª—É—á–∞—é—Ç —Ä–æ–ª—å "Muted"
- **–ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞**: `!rating` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤–æ–∏—Ö –æ—á–∫–æ–≤

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.7+
- discord.py
- Supabase (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥**

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
pip install discord.py supabase
```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Supabase:**

–°–æ–∑–¥–∞–π—Ç–µ –¥–≤–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ Supabase:

**–¢–∞–±–ª–∏—Ü–∞ `users`:**
```sql
CREATE TABLE users (
  id BIGSERIAL PRIMARY KEY,
  username TEXT UNIQUE NOT NULL,
  guild TEXT,
  rating INTEGER DEFAULT 0,
  last_bad_message TEXT,
  last_bad_at TIMESTAMP,
  updated_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);
```

**–¢–∞–±–ª–∏—Ü–∞ `bad_words`:**
```sql
CREATE TABLE bad_words (
  id SERIAL PRIMARY KEY,
  word TEXT UNIQUE NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);
```

4. **–î–æ–±–∞–≤—å—Ç–µ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ –≤ —Ç–∞–±–ª–∏—Ü—É `bad_words`:**
```sql
INSERT INTO bad_words (word) VALUES 
  ('–ø–ª–æ—Ö–æ–µ—Å–ª–æ–≤–æ1'),
  ('–ø–ª–æ—Ö–æ–µ—Å–ª–æ–≤–æ2'),
  ('–ø–ª–æ—Ö–æ–µ—Å–ª–æ–≤–æ3');
```

5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Discord –±–æ—Ç–∞:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [Discord Developer Portal](https://discord.com/developers/applications)
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –í–æ –≤–∫–ª–∞–¥–∫–µ "Bot" —Å–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω
   - –í–∫–ª—é—á–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ Privileged Gateway Intents:
     - Message Content Intent
     - Server Members Intent

6. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ –∫–æ–¥–µ:**
```python
DISCORD_TOKEN = "–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞"
SUPABASE_URL = "https://–≤–∞—à-–ø—Ä–æ–µ–∫—Ç.supabase.co"
SUPABASE_KEY = "–≤–∞—à_–∫–ª—é—á_supabase"
```

## üöÄ –ó–∞–ø—É—Å–∫

```bash
python bot.py
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥—ã

- `!rating` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—à —Ç–µ–∫—É—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥

### –ú–µ—Ö–∞–Ω–∏–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞

- **+1 –æ—á–∫–æ** –∑–∞ –∫–∞–∂–¥–æ–µ –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- **-10 –æ—á–∫–æ–≤** –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –º–∞—Ç–æ–º
- –ü—Ä–∏ —Ä–µ–π—Ç–∏–Ω–≥–µ **‚â§0** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –º—É—Ç (—Ä–æ–ª—å "Muted")
- –ü–æ—Å–ª–µ –º—É—Ç–∞ —Ä–µ–π—Ç–∏–Ω–≥ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ **11 –æ—á–∫–æ–≤**

### –°–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –£–¥–∞–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
2. –°–Ω–∏–º–∞–µ—Ç –æ—á–∫–∏ —Å –Ω–∞—Ä—É—à–∏—Ç–µ–ª—è
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
4. –ú—É—Ç–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —à—Ç—Ä–∞—Ñ–æ–≤

–ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä —à—Ç—Ä–∞—Ñ–∞ –∑–∞ –º–∞—Ç, –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```python
new_rating = update_rating(username, guild, -10)
```
–ò –∑–∞–º–µ–Ω–∏—Ç–µ `-10` –Ω–∞ –Ω—É–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```python
new_rating = update_rating(username, guild, +1)
```
–ò –∑–∞–º–µ–Ω–∏—Ç–µ `+1` –Ω–∞ –Ω—É–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Ç–æ–∫–µ–Ω—ã –∏ –∫–ª—é—á–∏ –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏–º–µ—Ä —Å `.env` —Ñ–∞–π–ª–æ–º:

```bash
pip install python-dotenv
```

```python
from dotenv import load_dotenv
load_dotenv()

DISCORD_TOKEN = os.getenv("DISCORD_TOKEN")
SUPABASE_URL = os.getenv("SUPABASE_URL")
SUPABASE_KEY = os.getenv("SUPABASE_KEY")
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –†–æ–ª—å "Muted" —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –º—É—Ç–µ
- –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –í—Å–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ UTC
- –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö, –≥–¥–µ —É –Ω–µ–≥–æ –µ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.
